<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN" xml:lang="EN">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="generator" content="cj.cvs" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZryDys Cj " />
    <meta name="copyright" content="CC-BY ZryDys Cj. M. 2024" />
    <meta name="license" content="CC-BY ZryDys Cj. M. 2024" />
    <meta name="date" content="2024-05-31" />
    <title id=t1>Planet: Browse internet content in a rotating sphere</title>

 
	<!-- sin paged el 3d va y la impresion pasable
	  breaks <!DOCTYPE html>
	-->
 
<style> 
   
   /* colors */
   .sepia { filter: sepia(100%); }
.huerotate { filter: hue-rotate(180deg); }

   h2,    .css-3d-text {
    font-size: 26px;
   color: #075d9f;
    font-family: "Arial Black", Gadget, sans-serif;
    text-shadow: 
        0px 0px 2px rgba(255, 255, 255,  0.6),  
        1px 1px 3px rgba(255, 255, 255, 0.4),  /* White shadow */
        2px 2px 5px rgba(122, 110, 239, 0.6),   /* Dark blue shadow */
         5px 5px 10px rgba(122, 110, 239, 0.3);
  
 }

</style> 
    <script id="vertexShader" type="x-shader/x-vertex"> // cj for transforming the vertices.
				 
		//layout (std140) 		uniform Matrices {     mat4 pvm;  } ;
		//in vec4 position;
		//out vec4 color;  //differ from https://www.lighthouse3d.com/tutorials/glsl-tutorial/hello-world/
		 
        void main() { // gl_Position = vec4( position, 1) ;  // faltaba rotat for non flat
			 gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1) ; 
			// gl_Position = projectionMatrix * modelViewMatrix * vec4(  projectionMatrix * modelViewMatrix * position, 1) ;
			 }
    </script>
        <script id="fragmentShader" type="x-shader/x-fragment"> // cj all fragments color:
		       uniform vec2 u_resolution;
        uniform float u_time;

 		vec4  cjImage( in vec2 fragCoord ) // out  fragColor,
		{
			// Normalized pixel coordinates (from 0 to 1)
			vec2 R = u_resolution.xy;
			vec2 uv = (2.*fragCoord - R) / R.y;

			// color as a vector of 3 components: red, green, blue.
			vec3 col = vec3(uv.x, uv.y, 0.);

			// draw crosshair
			if(abs(uv.x) < 0.01 || abs(uv.y) < 0.01) col = vec3(.5);

			// draw circle
			if(dot(uv, uv) < 0.001) col = vec3(1);

			return vec4(col,1.0);
		}

        void main() {
            vec2 st = gl_FragCoord.xy/u_resolution.xy;
			gl_FragColor = cjImage  (   gl_FragCoord.xy  );  //cjImag on absolut
        }

    </script>

      <link rel="stylesheet" type="text/css" href="./css/gallecols.css">
      <link rel="stylesheet" type="text/css" href="./css/galleclic.css"> 
      <link rel="stylesheet" type="text/css" href="./css/sombra.css" >
     </head>
<body>
<div class="ScriptTop">  <!-- cj2024 ==================GALLERY=====TOP======================= -->
  <div class="rt-container">
     <span style="color: grey">gallery((   &nbsp; </span>
    &nbsp; <img  src="./thumb/wingfoil3.jpg"><a href=./keyr.html>Solid</a>  
    &nbsp; <img  src="./thumb/planet.jpg"><a href=./planet.html>Planet</a> 
        &nbsp;  <img src="./thumb/tiles.jpg"><a href=./tile.html>Math</a>  
      &nbsp; <img  src="anim/diving.gif"><a href=./diving.html>Scene</a> 
   &nbsp;   <img  src="./thumb/esch3.jpg"><a href=./escher3D.html>Cubes</a>  
&nbsp; <img  src="./forest.jpg"><a href=./mvpc.html>MovPic</a>    
  
    &nbsp; <img  src="./thumb/dsci-byUrl.jpg" height=11px><a href=./visual-plotly.html>R&D+i</a> 
    &nbsp;   <a href=./details.html>we ZryDys</a>  
   <span style="color: grey; halign: left">  &nbsp; ))explore right pane</span> 
    </div>
</div>
<header class="ScriptHeader">
    <div class="rt-container">
    	<div class="col-rt-12">
        	<div class="rt-heading">
				<h2 id="alhambra-by-zrydys">
<h2>Planet: Browse internet content in a rotating sphere </h2>

             </div>
        </div>
    </div>
 </header>

 <p>
	Below, you are seeing internet content through <b>Planet-Lens</b>, letting you browse with moving 3D effects:</p>
 
		 <!-- FALKON OK 'jsm/k.png'  yet FFX cors KO  !! <li id="scene-container0" cj="for 3d canvas fine on li too but pagejs killed canvas"> 
		  <a href="https://ZryDys.github.io"> ZryDys.github.io </a> - Computer-aided Artistic Creation:
	 </li>-->

		  
		  
 <div id="scene-container"
  cj="for 3d canvas fine on li too but pagejs killed canvas" 
   style="width: 80%; height: auto;" > </div>

	- ZryDys created this 3D model inspired in the Icy World planet - Soon you can display your picture and url here
	  <center>		  </center>

- This animation also made thanks to the team of Three.js developers and Ricardo Cabello aka MrDoob.
<br>- Most 3D demos published at ZryDys.Github.io were released CC-BY-SA-NC 4.0 except if stated otherwise 
<br> 




<p>
	The above shows internet images (“<span style="color: green;" id="bq" >esch4cc.jpg</span>“ ,
optional  “<span style="color: green;" id="bbg">sail.jpeg</span>“) through animated lenses.</p>

	 ( last given :  <img src="esch4.jpg" id=iq alt="q" crossorigin='anonymous' width=88 />   <span style="color: red;" id=eq></span> )
     ( last bg was:      <img src="sail.jpeg" id=ibg alt="bg" crossorigin='anonymous' width=88/>   )

   <p id=cc >ZryDys.github.io/planet.html </p>  

 <!-- 3d ========================================== img -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js">//ok</script>
        <!--script src="/2act/a-goa/lib/three.min.js">console.debug("local3js")</script-->
        <script src="jsm/three.min.js">cjlocal3js</script>
 <script>// cj: this rotating img 3D !
//main: 
 var q,bg; //trans vars outside funct
 
 
//=============================================================
  cj_params()  ;


//=============================================================
function cargaq() { //cj CC-BY @2024  ZryDys & CrlHyn
 
   loader.load(  q, // "esch4c.jpg"
        (texture) => {
            texture1 = texture;
            start(); animate();
            capt_scr()  ;           
            escucha();
        },
        undefined, // onProgress 
        (err) => { 
            //const ee="Please check if URL is reacheable: "+q ;
            const ee= "free Zrydys allows images from authors at UppBeat.io X(twimg.com) Vimeo ArtList.io(imgix.net)  facebook(fbcdn.net) PixABay TuneTank GettyImages Linkedin(licdn.com) Dribble WikiMedia.org Deezer FreeToUse PrintAble Pexels DeviantArt ImGur DropBox ...  \n or just gmail us to ZryDys suggesting new domain.\n You attempted: "+q ;
            alert( ee ) ; document.getElementById("eq").innerHTML = ee;
            q="esch4c.jpg";cargaq();
         }
    );    //loader cool 
 
};

var q,bg; //trans vars outside funct
//=============================================================
function cj_params() { //cj CC-BY @2024  ZryDys & CrlHyn

    const params = new URLSearchParams(document.location.search);
    q = params.get("q"); //if (q) { q= q.replace(/ /g,"+") } else {q='esch4cc.jpg'} ; // o
    q = q? q.replace(/ /g,"+")  : 'esch4cc.jpg'  ;
    bg = params.get("bg");if (bg) { } else {bg='sail.jpeg'} ; 
    document.getElementById("bq").innerHTML = q; // <p id=bbg></p>
    document.getElementById("bbg").innerHTML = bg;  
    document.getElementById("iq").src=q; // update image src not content !
    document.getElementById("ibg").src=bg; // update image src not content !  
  const host = "https://zrydys.github.io"; 
    const urlpa = `/planet.html?q=${q}&v1`;  //uses ${q} variable

    const url = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&color=002&bgcolor=eff&data="+ encodeURIComponent(host+urlpa);

    document.getElementById("cc").innerHTML = `Tool code 2024 CC-BY-NC-SA ZryDys.Github.io/${urlpa} &url`;

} //func cj params
	 
	 
	 
	 
	 
	 
 var camera, scene, renderer;
 var geometry, material, mesh;
 var  material2;
 init(); animate();

 function init() {

    camera = new THREE. PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000); // cj: 
    camera.position.z = 210;
    
    scene = new THREE. Scene(); // bkgd?
     scene.background = new THREE.Color('lightcyan');
    //scene.fog = new THREE.Fog(0xededde, 0, 750); //ededde whites ok // scene.fog = new THREE.Fog(0xeee, 0, 750); //blueish inside
    
    //boxgeometry = new THREE.BoxGeometry(100, 120, 150);
    geometry = new THREE.SphereGeometry(100, 120, 150);  //sphe
    //antes:
		  material = new THREE.MeshBasicMaterial({     color: 0xee0044 });

            uniforms = {
                u_time: { type: "f", value: 1.0 },
                u_resolution: { type: "v2", value: new THREE.Vector2() },
                u_mouse: { type: "v2", value: new THREE.Vector2() }
            }; 

            material2 = new THREE.ShaderMaterial( {  //undef?
                uniforms: uniforms,
                vertexShader: document.getElementById( 'vertexShader' ).textContent,
                fragmentShader: document.getElementById( 'fragmentShader' ).textContent
            } );

const vertexShader = /*glsl*/`//el 2 necesitaba igual projec y model el matw y 3 ok
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;

const fragmentShader = /*glsl*/` //el 2 y mat3 ok
void main() {
  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}
`;

const material3 = new THREE.ShaderMaterial({
  fragmentShader: fragmentShader,
  vertexShader: vertexShader
});

const loader = new THREE.TextureLoader(); //texture
  //fail  loader.setCrossOrigin( 'anonymous' );  //cors
  //fail  loader.crossOrigin = 'anonymous';PERHAPS Disabling HTTPS-Only Mode in Firefox solve...
      loader.crossOrigin = '';
 // anyway ffx fails loader.crossOrigin = null  ; 
var myimg='http://localhost:8000/k.png'; //python3 -m http.server #%Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8000/k.png. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). 
  myimg='jsm/k.png';  myimg='sail.jpeg'; //#%not same dir//hmm CORS in local
 myimg='../../2prod/elk-proxy/ProxyHits-2day-byNetwork.PNG';

 myimg='../../2prod/elk-proxy/proxy-by-url.PNG';
 myimg='cubE.png';
 myimg='cafe2.jpg'; 
 myimg='./models/marble.png'; 
 myimg='esch4cc.jpg'; //Escher Next Dimension
 myimg=q; //param!!
// this fails also falkon wo/ msg: var texture = loader.load( myimg ); var material5 = new THREE.MeshLambertMaterial({ map: texture });  //mat5 text image k.png

//const  blob:file:///a3ef88d3-eac1-46de-abeb-08a3fe62ce38
   
   //5 new THREE.PlaneGeometry( 1, 1, 1, 1 ),
   //5 older deprecated. but better cors  FALKON OK 'jsm/k.png'  yet FFX cors KO
material5 = new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture( myimg ) }) ;
   //normalMat es color by pos no se ve rotar! y physical too dark
   
    mesh = new THREE.Mesh(geometry, material5 );
    mesh.scale.x = -1;   // cj insid out
    mesh.scale.x = -2; mesh.scale.y = 2; mesh.scale.z = 2; // cj big ssignificant effect
    scene.add(mesh);
    
        // 2+ lights 1 1 1 or 151 151 151 ?
        const dirLight1 = new THREE.DirectionalLight( 0xffffff );//ffffff   //no gree 5aff5a
        dirLight1.position.set( 151, 151, 151 );
        scene.add( dirLight1 );

        const dirLight2 = new THREE.DirectionalLight( 0xa022a8 ); //002288  //no gree
        dirLight2.position.set( - 151, - 151, - 151 );
        scene.add( dirLight2 );

        const ambientLight = new THREE.AmbientLight( 0x222222 );
        scene.add( ambientLight );    
    
    // GLOW glow
	const haloVertexShader = /*glsl*/`
      varying vec3 vertexNormal;
      void main() {
		 vertexNormal = normal;
		 gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);   
	  }  `;

	const haloFragmentShader = /*glsl*/`
      varying vec3 vertexNormal;
	  void main() {
		float intensity = pow(0.9 - dot(vertexNormal, vec3(0, 0, 1.0)), 2.0);
		gl_FragColor = vec4(0.8, 1.0, 0.6, 0.2) * intensity;
	  }	`;

	const halo = new THREE.Mesh(
		 new THREE.SphereGeometry(180, 20, 20),
		 new THREE.ShaderMaterial(
			{  vertexShader:haloVertexShader,   fragmentShader:haloFragmentShader,
			  blending: THREE.AdditiveBlending,   side: THREE.BackSide }
		 )
	)

	//scene.add(sphere);
	halo.scale.set(1.2, 1.2, 1.2);
	scene.add(halo);
	
   // renderer.setSize(326, 324); // medium
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(126, 124); //pequen
    renderer.setSize(window.innerWidth/1.6, window.innerHeight/1.2); // fit /1.2 or /1.6
    
    // EITHER, OR document.body.appendChild(renderer.domElement);  //pon the created <canvas>
    const container = document.querySelector('#scene-container'); // the container that will hold scene
    container.append(renderer.domElement); // add the created <canvas> element to the cont

            onWindowResize();
            window.addEventListener( 'resize', onWindowResize, false ); //add onwind

            document.onmousemove = function(e){
              uniforms.u_mouse.value.x = e.pageX
              uniforms.u_mouse.value.y = e.pageY
            }

 }

 function animate() {
    requestAnimationFrame(animate );
    mesh.rotation.x += 0.003;
    mesh.rotation.y += 0.002;
//            uniforms.u_time.value += clock.getDelta(); //from otr
    renderer.render(scene, camera);
 } // cj: end of moving logo img 3D ==========================================

         function onWindowResize( event ) {
			  console.debug (uniforms , material, material2);
		//	  console.debug (uniforms , material);
		// OJITO WIDTH y SCROLL keyr & planet OK but  Tiles falla scroll
            renderer.setSize( window.innerWidth *.8, window.innerHeight );
            uniforms.u_resolution.value.x = renderer.domElement.width;
            uniforms.u_resolution.value.y = renderer.domElement.height;
        }

 </script>
  

  </body>
  
</html>
