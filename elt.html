<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet ELT Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }

        .control {
            margin: 10px;
        }
    </style>
</head>
<body>

<div id="map"></div>

<!-- Slider to control opacity -->
<div class="control">
    <label for="opacity-slider">Layer Opacity: </label>
    <input type="range" id="opacity-slider" min="0" max="1" step="0.01" value="1" />
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // Initialize the map object
    var map = L.map('map').setView([51.505, -0.09], 2); // Centered on the world with zoom level 2

    // Add the ESRI satellite imagery layer as the base layer
    var satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '&copy; <a href="https://www.esri.com/">ESRI</a>',
        maxZoom: 16,
        minZoom: 2
    }).addTo(map);

    // Add OpenStreetMap as an alternative base layer
    var osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19,
        minZoom: 2
    });

    // Custom tile layer for comparison (replace with your tiles)
    var customTileLayer = L.tileLayer('https://zrydys.github.io/tiles/{z}-{x}-{y}.png', {
        attribution: 'Custom Tiles from zrydys.github.io',
        maxZoom: 10,
        minZoom: 4,
        tileSize: 256,
        subdomains: 'abc',
        noWrap: true
    });

    // Add a Layer Control to switch between base layers
    var baseLayers = {
        "Satellite Imagery": satelliteLayer,
        "OpenStreetMap": osmLayer
    };

    var overlayLayers = {
        "Custom Tiles": customTileLayer
    };

    L.control.layers(baseLayers, overlayLayers).addTo(map);

    // Set up opacity control slider for layers
    var opacitySlider = document.getElementById('opacity-slider');
    
    // Update opacity of all layers based on slider value
    opacitySlider.addEventListener('input', function() {
        var opacity = parseFloat(opacitySlider.value);
        satelliteLayer.setOpacity(opacity);
        osmLayer.setOpacity(opacity);
        customTileLayer.setOpacity(opacity);
    });

    // Add initial custom tile layer to map (but it's not visible by default)
    customTileLayer.addTo(map);
</script>

</body>
</html>
