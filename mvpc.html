<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN" xml:lang="EN">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="zrydys cj " />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZryDys Cj " />
    <meta name="copyright" content="CC-BY ZryDys Cj. M. 2024" />
    <meta name="license" content="CC-BY ZryDys Cj. M. 2024" />
    <meta name="date" content="2024-05-31" />
    <title id="t1">Discover creations through effects & moving clips</title>
 <link rel="Shortcut icon" type="image/png" href="zrydysML.png"  title="ZRyDys" >
 <link rel="fluid-icon" href="zrydysML.png" title="ZryDys">
 <link rel="alternate icon" class="js-site-favicon" type="image/png" href="zrydysML.png"> 
<!-- sin paged el 3d va y la impresion pasable 
	-->
     <!--  demo=blue cols - styl=click -->
    <link rel="stylesheet" type="text/css" href="./css/sombra.css">
     <link rel="stylesheet" type="text/css" href="css/gal.css" >
    
<style>
  #content3 input {   display:  inline-block;    width: auto;  }  /* right  18  from block to inline-block!! */ 
    #content3 label {   text-align: left;   }  /* right  18 */ 
     #content3 img,  #contentd img {     width:  4%; height: auto; max-height: 4%; }    /* works but do not end in ; */    

  .peqNO img {     width:  4%; height: auto; max-height: 4%; } 
   
 .image-gallery sectionNO img {     width:  4%; height: auto; max-height: 4%; } /* no; overwrite for small*/
.explica  img { width: 55px; } 
</style>
 

</head>
<body> 
 
 <h2 id="movpic-free-transform-your-images-into-clips">Discover creations through effects & moving clips</h2>
 
<p>In this clip below, <strong>MovePic</strong>Â acts a â€œmagic lensâ€ showing original images with moving effects :</p>

		  <div id="scene-container" cj="for 3d canvas fine on li too but pagejs kills canvas"  style="width: 60%; height: auto;" > </div>
		 
		  
<p>The above shows internet images (â€œ<span style="color: green;" id=bq>esch4cc.jpg</span>â€œ ,   â€œ<span style="color: green;" id=bbg>sail.jpeg</span>â€œ
) through animated lenses.</p>

<small>
<p>This MovPic effect is <strong>AI-free</strong>, allowing authentic artistic creations! simply shown in Moving Clips</p>
<ul>
<li>Keep as Video? When you hold the source image rights, you could save your creation using a video tool like <a href="https://chromewebstore.google.com/detail/canvas-capture/pnhaaddlgbpchligciolcdjgndcpelee">chrome canvas-capture</a>. Soon registered and beta users could get a GIF (animated picture) or MovieClip here. ZryDys helps you add effects.</li>
</ul></small>
  
<h3 id="try-movpic-free-here-at-zrydys.github-.iomvpc.html">Try MovPic in 2 steps: to browse images with moving effects!  </h3>

 <form class="theform" id="image-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="153284918" data-scoped-search-url="//search" data-owner-scoped-search-url="/orgs/Azure-Samples/search" data-unscoped-search-url="/search" action="?uu=7&" accept-charset="UTF-8" method="get"  >
    <label for="idq"> <strong>1st</strong>:     Enter the URL of the main image you wish to animate: 
	    	 <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" aria-hidden="true" class="mr-1 header-search-key-slash"><path fill="none" stroke="#979A9C" opacity=".4" d="M3.5.5h12c1.7 0 3 1.3 3 3v13c0 1.7-1.3 3-3 3h-12c-1.7 0-3-1.3-3-3v-13c0-1.7 1.3-3 3-3z"></path><path fill="#979A9C" d="M11.8 6L8 15.1h-.9L10.8 6h1z"></path></svg>

      <span title="Paste a valid image URL from sources like UppBeat.io, Thingiverse, Flickr, MuseScore, or similar.">
        (Supported Sources)
      </span>
    </label>
    <input       type="url"    name="q" id="idq"        placeholder="e.g. https://zrydys.github.io/thumb/tiles.jpg" 
      required 
    />

    <p class="note">Ensure the image URL is accessible and from a supported source.
       <small> URLs from ğŸŸ¢Taptap  ğŸ”µ@Steam  ğŸ…¿ï¸Pexels ğŸ¦X   âš ArtList   ğŸŸ¦Thingiverse  ğŸ€DeviantArt  ğŸŸ©pixabay   ğŸµuppBeat    ğŸ”µğŸ”´Flickr  ğŸ”·Vimeo ğŸ…²GettyImages  ğŸ’œDeezer   ğŸ¡¥ImGur  ğŸ”´FreeSound  ğŸ¶musescore  ğŸ…•facebook  ğŸ“˜Dropbox... TuneTank Linkdin Dribble WikiMedia FreeToUse PrintAble ...
       	 ( last given :  <img src="esch4.jpg" id=iq alt="q" crossorigin='anonymous' width=88 />   <span style="color: red;" id=eq></span> )

       </small> </p>

    </p>

 <!-- label class="form-control input-sm " for="idq">jjj </label
 <li> Paste the URL of the main image:   
 </li>  <li> 2nd (optional) :  add a background image URL:   <input type="text"           class="f ble"   name="bg"    />
 </li>
      -->
 <input type="hidden" data-csrf="true" class="js--csrf" value="F8+hvRi+ME0DOtPXBw==" />

	     <!-- Background Image URL Input -->  
	 <label for="background-image-url">      2. Optional: Add a background image URL to enhance your animation:
  <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="cj2 ">     <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
	 </label>
    <input 
      type="url"   spellcheck="false"  autocomplete="off"   data-hotkey=s,/  
      id="background-image-url" 
      name="bg" 
      placeholder="e.g., https://zrydys.github.io/thumb/tiles.jpg" 
    />
    <p class="note">If left blank, a default background will be used.
     ( last was:      <img src="sail.jpeg" id=ibg alt="bg" crossorigin='anonymous' width=88/>   )
    </p>
 
   <!-- Submit Button -->
  <li><strong>and 3!</strong>:  Browse by just Clicking:
   <button class="col" type="submit" id="generate-animation"   > â€œGenerate Animationâ€ 
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-trash">  <path fill-rule="evenodd" d="M1.75 2.5h12.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25zM14.25 1H1.75A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z"></path>
</svg>   </button>
to apply effects  </li>
</form>  

<br/>
 

<ul>
<li>loved it? feel free to Donate  a Coffee or share your inspirations or wishes</li>
</ul>
<hr />
 
 <small> 
 <li>Visitors see free effects, with watermark, 
 can  <a href='javascript:save_scr()'> save the 1st snapshot </a>  or <a href="https://chromewebstore.google.com/detail/canvas-capture/pnhaaddlgbpchligciolcdjgndcpelee">chrome capture</a> a video clip, depending on the author's copyright.</li>
<li>Registered users add creative works (See Gallery left). Free registration with mail for safety. Effects: Solid, Fractal, Cubifyâ€¦   </li>
 <li>Premium let create new effects, order physical objects, Turnkey solutions... For industry, art, data science customers</li>

 <h4 id="by-zrydys---boosting-creativity-for-all">by ZryDys - Boosting Creativity for All !   Helping people Create Faster 
 </h4>
 
 <p id=cc ></p>  ZryDys.github.io/mvpc.html 
 </small>  ,<canvas width="5%" height="5%" style="width: 5%; height: 5%;" id=cjcan></canvas>
  <ol type="1"></ol>
	  </div>
 
<hr>
<h3 id="gallery-see-what-others-are-creating">2. Gallery â€“ See What Others are Creating</h3><small>

<!-- Gallery Section -->
<div class="gallery-container">
 <button class="scroll-btn left-btn">&#10094;</button>
  <div class="gallery">
SEE: 
MOVE
PICS 
    <div   onclick="goTo('?q=https://img.tapimg.net/market/images/4d4d88f02aba3559a8ecd7e4498def05.jpg')">   <img src="thumb/camp.jpg">Camper Van
    </div>
    <div   onclick="goTo('?q=cach/CA.jpg')"> <img src="cach/CA.jpg"  > MariamCA

    </div>
    <div  onclick="goTo('?q=cach/MD.jpg')"> <img src=thumb/merge.jpg  > Merge
    </div>
    <div   onclick="goTo('?q=cach/M.jpg')"> <img src="cach/M.jpg"  > Museums
    </div>
    <div   onclick="goTo('?q=cach/NS.jpg')"> <img src="cach/NS.jpg" > Next Stop

    </div>
    <div  onclick="goTo('?q=cach/SG.jpg')">     <img src="cach/SG.jpg" alt="9">Sigillum
        </div>
DIVE INTO SCENES: 
    <!-- Add more thumbnails here -->
    <div   onclick="goTo('diving.html')"> <img src="anim/diving.gif" >diving
    </div>
     <div   onclick="goTo('orbitforest.html')"> <img src="anim/forest.gif" >forest
    </div>
 
MAKE
TOUCH
DECO:

    <div   onclick="goTo('keyr.html?q=tactile&c=0x41a19a')">  <img src="thumb/tactile3.jpg" > 
    </div>   

    <div   onclick="goTo('keyr.html?q=inkkey&c=0xff385c')">  <img src="thumb/ink3.jpg" > 
    </div>   
 
THINK
TILES
MATH:
   <div   onclick="goTo('tiles.html');">  <img src="thumb/alhambra.jpg" > Tile 
    </div>

 
    <div   onclick="goTo('tofractal.html')"> <img src="wall/tofractal.jpg"  >   Fractal 
 </div>
 
    <div   onclick="goTo('tile.html')"> <img src="thumb/tiles.jpg "  > tiles
          </div>    

Sci
R&amp;D
US:
   <div   onclick="goTo('details.html')">       <img src="thumb/dsci-byUrl.jpg" >about us Agile +CI +Symmetry
    </div>
     <div   onclick="goTo('visual-plotly.html')">       <img src="wall/z-datsci.jpg" >R&D+i Data science
    </div>  



<!--beware small over div broke all scrolls !! -->
</div>   <button class="scroll-btn right-btn">&#10095;</button>
</div>
 <script type="text/javascript" src="css/gal.js"> gal 1st scroll fine if div is respected </script>

	  <div class="explica" cj="for smaller thumbs" style=" img { width: 55px; }" >

<p>Check out the <strong>Gallery</strong> to explore dynamic images shared by registered users. See how others applied creative effects with ZryDys tools like:</p>
<p><strong>Fracting</strong> relies on few values to create fractals, and produced this :  </p>
<ul>
<li>Dynamic <a href="glsl-fractal.html">fractals changing dimensions and colors</a> ..<br />
</li>
<li>static fractal backgrounds blue tones <img src="bluefrac.jpg" /></li>
</ul>
<p><strong>MovPic</strong> or MovePic shows Images as Moving Scenes by acting as moving Lens.  </p>
<ul>
<li>see iconic pictures like <a href="mvpc.html">Escherâ€™s â€œPath of Life IIâ€ through a Magic-Lens</a></li>
<li>or your own picture brought to life dynamic</li>
</ul>
<p><strong>Alhambra</strong> tool uses maths to help us produce tiles &amp; tessellations:</p>
<ul>
<li>see moving  <a href=./tile.html> Math tiles</a> 
	Or <a href=./tiles.html> Alhambra tesellations</a> </li>
<li>make math education exciting  <a href=./tiles.html>
	 <img src=./thumb/alhambra.jpg height=55px /> </a> .. 
	 <a href=./tile.html>   <img src=./thumb/tiles.jpg height=55px /> </a></li>
 

</ul>
<p><strong>Solidify</strong> into Artistic decorations: or print into a physical 3D piece: e.g.Â A keyring of your logo. (several 3D print shops available)</p>
<ul>
<li>Industry or Artistic solids, see <a href="escher3D.html">3D piezas</a> some ready to 3D print<br />
</li>
<li>See <a href="3stl3js.html">display</a> or print <a href="Tetrahedron.stl">STL models</a> ; or converting Logo images into keyrings</li>
</ul>
<p><strong>Cubify</strong> shows your image as a 3D dynamic creation ( or save to a rotating 3D videos If you have rights on the source image )</p>
<ul>
<li>A <a href="esch4.html">dynamic cube showing MCEscher artwork</a></li>
</ul>
<p>Other Dynamic Virtual creations:</p>
<ul>
<li><a href="https://zrydys.github.io/tofractal.html">Entering a Fractal world</a> . <img src="wall/tofractal.jpg" />Ğ´Ñ„</li>
<li>navigating a <a href="orbitforest.html">virtual Forest</a> in the snow <img src="forest.jpg" /></li>
</ul>
<p><strong>Registered</strong> users can share creations in the Gallery or link it with their social networks.</p>
<ul>
<li>Register and Unlock additional features by writing â€˜free registerâ€™ subject to ZryDys @ Gmail to Verify your email and accept you are the owner of your source images.</li>
</ul>
</div>

<h3 id="premium-boost-your-creations">3. Premium â€“ Boost Your Creations</h3>
<p><strong>Premium Users</strong> enjoy advanced effects, additional hints, or the option to receive 3D-printed pieces of creations!</p>
<p>Take your creations to the next level with <strong>Premium</strong> features from ZryDys , for instance:</p>
<ul>
<li>Get enhanced video created from your images, music, and subtitles text</li>
<li>Transform your logo into a 3D piece ready to 3D-print, or receive it printed</li>
<li>taking your proposals for new effects to boost your creations, gamify it, â€¦</li>
<li>Workshops about Navigating 3D Data &amp; Models using VR &amp; AR Glasses</li>
</ul>
<h4 id="and-turnkey-solutions">and Turnkey Solutions</h4>
<p>ZryDys offersÂ <strong>turnkey solutions</strong> for business or creative needs. Get in touch for more information!</p>
<p>Our experience from amateur Decoration to complex Industry and Data science projects:</p>
<ul>
<li>Decorations that used ceramic and imagination:<br />
</li>
<li>Remote Instruments control, Automate, and early-Warning:
<ul>
<li>In this joint collaboration we tracked remote status of complex QKD devices.</li>
</ul></li>
<li><a href="visual-plotly.html">Navigating 3D data</a> for Science, Business, Telecom, Cyber-security :
<ul>
<li><img src="wall/z-datsci.jpg" /></li>
<li>in consulting projects the business add AI to Data Science using scikit-learn, pyTorchâ€¦</li>
</ul></li>
</ul>
<h3 id="coming-next">Coming Next</h3>
<p>To <strong>help everyone express their creativity easier</strong> â€¦ In ZryDys we already envision future tools :</p>
<ul>
<li>LifeTree - Showing hierarchy, connections, heredity,.. in 3D virtual or solids</li>
<li>MagicMath - Mandala geometry, color I-Ching, austral serpent, Thanka art..</li>
<li>SpaceShow - floating plane showcasing your creations, Hologram alike,â€¦</li>
<li>AudioVideo compositions - currently doing for premium and customers</li>
<li>PhotoLab in VR AR glasses or Projections - links from/to Pictograms, Instagram facetimeâ€¦</li>
</ul>
<h4 id="thanks-to-our-customers-partners-and-collaborators">Thanks to our customers, partners and collaborators:</h4>
<hr />
<h3 id="copyright-rights">Copyright &amp; Rights</h3>
<p>Tool rights: <strong>2024 CC-BY-NC-SA</strong>. For more information, visit: mvpc.html.</p>

                
 

 <!-- 3d ========================================== 
 ..><canvas width="222" height="222" style="width: 222px; height: 222px;" id=cjcan><img src="sail.jpeg"></canvas>

 img -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js">//ok</script>
	<script src="/2act/a-goa/lib/three.min.js">need js  local3js</script>
	<script src="jsm/three.min.js">need js cjlocal3js</script>
 <script>// cj: this rotating img 3D !
 
//main: 
 var q,bg; //trans vars outside funct
 var camera, scene, renderer;  //asi las paso 
 var geometry, material, mesh;  //tengo mesh aqui pero no va dentro de callbak
 var  material2,materialI, texture, uniforms;
 const slow=10;
 
//=============================================================
  cj_params()  ;
      
 /*// cj: tis with start  */ 

const loader = new THREE.TextureLoader();  
loader.setCrossOrigin('anonymous'); //dec18 to check on cors issues detected  //ortry ''; //anoth

//const texture2 = loader.load(q);  //
const texture2 = loader.load("zry0.png"); //"esch4cc.jpg"  // 
//const textureb = loader.load("sail.jpeg");
const textureb = loader.load(bg, t => {loading('loadimg') } );  //never called if not loaded !! need onErr
//const texture2 = loader.load("https://i.imgur.com/UKBsvV0.jpg");

var texQ, texBG; //
//trying('mainimg'); //loading('loadimg');


try {textureb.image.alt ;//defined
	 console.debug("seqtxtbg1",textureb);
}catch(e){ //undefided at Sequential time because didnt loaded yet
	 console.debug("seqtxtbg0",textureb,e);
};

let texture1;  // window.open(dataURL, "image"); //[Violation] 'requestAnimationFrame' handler took 65ms
cargaq(); /*loader.load(  q, // "esch4c.jpg"
    (texture) => {
        texture1 = texture;
        start(); animate();
        capt_scr()  ;           
        escucha();
    },
    undefined, // onProgress 
    (err) => { 
        const ee="Please verify that URL ! using now a demo image since the URL threw error "+err ;
        alert( ee ) ; document.getElementById("eq").innerHTML = ee;
        texture1 =  texture2; start(); animate(); capt_scr()  ; escucha();
     }
);    //loader cool https://stackoverflow.com/questions/59448702/map-image-as-texture-to-plane-in-a-custom-shader-in-three-js
*/

//=============================================================
function cargaq() { //cj CC-BY @2024  ZryDys & CrlHyn
 
   loader.load(  q, // "esch4c.jpg"
        (texture) => {
            texture1 = texture;
            start(); animate();
            capt_scr()  ;           
            escucha();
        },
        undefined, // onProgress 
        (err) => { 
//              const ee= "Zrydys navigates authors' creationsğŸ¼ğŸ“¸ from supported publishers ğŸŸ¢Taptap  ğŸ”µ@Steam  ğŸ…¿ï¸Pexels ğŸ¦X   âš ArtList   ğŸŸ¦Thingiverse  ğŸ€DeviantArt  ğŸŸ©pixabay   ğŸµuppBeat    ğŸ”µğŸ”´Flickr  ğŸ”·Vimeo ğŸ…²GettyImages  ğŸ’œDeezer   ğŸ¡¥ImGur  ğŸ”´FreeSound  ğŸ¶musescore  ğŸ…•facebook  ğŸ“˜Dropbox... TuneTank Linkdin Dribble WikiMedia FreeToUse PrintAble \n (gmail to ZryDys@ suggesting new sites).\n unavailable: "+q ;
            const ee="Zrydys navigates authors' creationsğŸ¼ğŸ“¸ from open publishers like ğŸŸ¢Taptap ğŸ”µ@Steam ğŸ…¿ï¸Pexels  ğŸ¦X  ğŸ”¶ArtList ğŸŸ¦Thingiverse ğŸ€DeviantArt ğŸŸ©pixabay ğŸµuppBeat ğŸ”µğŸ”´Flickr ğŸ”·Vimeo ğŸ…²GettyImages ğŸ’œDeezer  ğŸ¡¥ImGur ğŸ”´FreeSound ğŸ¶musescore ğŸ…•facebook ğŸ“˜Dropbox ğŸ’¡TuneTank ğŸŸ¦Linkin ğŸŸ£Dribble âšªWiki ğŸŸªFreeToUse ğŸŸ§PrintAbles  ğŸ•Apple ğŸ…°Adobe ğŸŒAmazon ..\n (or gmail to ZryDys@ suggesting your site).\n unreacheable: "+q ;
            alert( ee ) ; document.getElementById("eq").innerHTML = ee;
            q="esch4c.jpg";cargaq();
         }
    );    //loader cool 
 
};

var q,bg; //trans vars outside funct
//=============================================================
function cj_params() { //cj CC-BY @2024  ZryDys & CrlHyn

    const params = new URLSearchParams(document.location.search);
    q = params.get("q"); //if (q) { q= q.replace(/ /g,"+") } else {q='esch4cc.jpg'} ; // o
    q = q? q.replace(/ /g,"+")  : 'esch4cc.jpg'  ;
    bg = params.get("bg");if (bg) { } else {bg='sail.jpeg'} ; 
    document.getElementById("bq").innerHTML = q; // <p id=bbg></p>
    document.getElementById("bbg").innerHTML = bg;  
    document.getElementById("iq").src=q; // update image src not content !
    document.getElementById("ibg").src=bg; // update image src not content !  
  const host = "https://zrydys.github.io"; 
    const urlpa = `/mvpc.html?q=${q}&v1`;  //uses ${q} variable

    const url = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&color=002&bgcolor=eff&data="+ encodeURIComponent(host+urlpa);

    document.getElementById("cc").innerHTML = `Tool rights 2024 CC-BY-NC-SA ZryDys.Github.io/ ${urlpa} &url`;

} //func cj params


//=============================================================
function trying(uu){ //cj 24 sw cc-by ZryDys // listen to xy to resize
	
	 try { //href = new URL(q).hash;
		  //var texIMG = loader.load("sail4.jpeg"); //load always OK so must do onload
		  var texIMG = loader.load(
		       "sail4.jpeg" ,
		       (t) => { loading(t) }
		     ); //load always OK so chk onload

          console.debug(" t1 ",uu ) 
		 } 
	 catch(er) { console.debug(" h2 ",uu,er) 
        // const h2 = href.replace(/^#\/?/, ""); console.debug(" h2 ");
         }
     finally {
        console.debug(" h3 ",uu,texIMG)
     }
 
};
 
//=============================================================
function loading(tx){ //cj 24 sw cc-by ZryDys // listen to xy to resize
	
	try {textureb.image.alt ;//defined
	 console.debug("txtbg1",textureb);
}catch(e){ //undef because didnt loaded yet
	 console.debug("txtbg0",textureb,e);
};
	
	
	 try { 
		 //,texIMG fail
		 texQ = tx; //href = new URL(tx).hash;
         console.debug(" lt1 ",tx ) //.image.alt ) 
		 } 
	 catch(er) { console.debug(" lh2 ",tx,er) 
         // const h2 = href.replace(/^#\/?/, ""); console.debug(" h2 ");
         }
     finally {
        console.debug(" lh3 ",tx)
     }
 
};

//=============================================================
function escucha(){ //cj 24 sw cc-by ZryDys // listen to xy to resize
	window.addEventListener( 'resize', onWindowResize, false ); //add onwind
	document.onmousemove = function(e){ 
	  uniforms.u_mouse.value.x = e.pageX
	  uniforms.u_mouse.value.y = e.pageY
	}
};


var imURL; //transmit bw capt_scr save_scr
//=============================================================
const capt_scr = () => { //cj 24 constant funct
//function capt_scr(){  //cj 24 sw cc-by ZryDys // captures only early before 100ms
    imURL = renderer.domElement.toDataURL("image/png");  //toDataURL();
	var img = new Image(  );  //{ width: 99 }
	img.src = imURL;
		img.height = '22';

	console.debug ( "img,rend: ", renderer.domElement, img, uniforms.u_time.value  );
    
    // const xhr = new XMLHttpReqeust(); xhr.open('PUT', 'https://4.8.23.23/rt', true); xhr.send(dataURL); // Send it to some server via XHR
    document.body.appendChild(img);
    
};

var imURL; //transmit bw capt_scr save_scr
//=============================================================
function save_scr(){  //cj 24 sw cc-by ZryDys // saves last scr
	        var anchor = document.createElement("a");
            anchor.href = imURL;
            anchor.download = "yourZryDys.png";
            anchor.click();
	
	/*             anchor.remove();  //CLEAN
            texture.dispose();
            renderer.domElement.parentElement?.removeChild(renderer.domElement);
            renderer.dispose();
     */       
}
 
 /*  //cj 2024nov28 img load : no error pero : no se ve img cubo; ni en plano
 const image = new Image();
 image.onload = function() {  // prefix THREE Texture is not defined  at Image.image.onload 
     console.debug ( "cj-img-load" ); // DoEndSharedImageAccessCHROMIUM: bound texture is not a shared image
            texture = new THREE.Texture(image);   //no se ve img, pero plano con lado transpa
      init(); animate();  
 } //
   image.src = 'cubeGL.jpg'; //image.src = 'esch4cc.jpg';
*/ 
  
   //init(); //
   

   
   
// ====================================================
//   import vertexShader from '../shaders/vertexShader.glsl'; also possible https://medium.com/@arashtad/how-to-create-and-use-custom-shaders-in-three-js-c51440b5a293

const vertexShader = () => {
 return `
	varying vec2 vUv; 
	uniform float u_time;

	void main() {
	  vUv = uv; 
			//std::cout << "hey";
			
	  vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);
	  gl_Position = projectionMatrix * modelViewPosition; 
	  // gl_Position = projectionMatrix * modelViewMatrix * vec4(position+1.*sin(position), 1.0); //deform 
	  // gl_Position = projectionMatrix * modelViewMatrix * vec4(position+1.*sin(u_time), 1.0); //move by t
	  gl_Position = projectionMatrix * modelViewMatrix * vec4(position+1.*sin(position+u_time), 1.0); //cool t  //awesome
	//zoom pero se va  gl_Position = projectionMatrix * modelViewMatrix * vec4(position+1.*tan(position+u_time), 1.0); //cool t  //awesome

	}
 `;
}

const fragmentShader = () => {
    return `
        uniform sampler2D texture1; 
        uniform sampler2D texture2; 
        varying vec2 vUv;
        uniform float u_time;

        void main() {
            vec4 color1 = texture2D(texture1, vUv);
            vec4 color2 = texture2D(texture2, vUv);
            //            vec4 fColor = mix(color1, color2, vUv.y);
            vec4 fColor = mix(color1, color2, .07); //.1clear .7dark
                   //     fColor.a = 1.0;  //no veo diff
           //  fColor.a = sin(3.14+2.*u_time);  //mixing by time too
         //   fColor.r = sin(3.*u_time );  // would change colors

           //   gl_FragColor = color2;  // had forgot tex2 load!
           gl_FragColor = fColor; //the mix makes it darker
            //gl_FragColor = mix(color1, color2, vUv.y);

        }
    `;
}



//=============================================================
function start() {
  renderer = new THREE.WebGLRenderer();
  
  
  //DONDE
  //        // EITHER, OR document.body.appendChild(renderer.domElement);  //pon the created <canvas>
    const container = document.querySelector('#scene-container'); // the container that will hold scene
    container.append(renderer.domElement); // add the created <canvas> element to the cont

  
  //const para transmit
  scene = new THREE.Scene();
       clock = new THREE.Clock();  // for u_time

  //const
   camera = new THREE.Camera();
    //  camera = new THREE. PerspectiveCamera(); // slightly differ on sin() cj: 
   // camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );  //sometimes doesnt catch
 
  
   uniforms = {
      u_time: { type: "f", value: 1.0 },  //cj: type no longer needed
      texture1: { value: texture1 },
      texture2: { value: texture2 },  //or 1 if 1img
       u_resolution: { value: new THREE.Vector2() },
       u_mouse: { value: new THREE.Vector2() }, //cj: type no longer needed
      
  };


   //const    planeGeometry = new THREE.PlaneBufferGeometry(1, 1); //ok img - sin() rotates different
  //planeGeometry = new THREE.TorusKnotGeometry(0.5, 0.15, 100, 64); //Great Torus Knot
  // planeGeometry = new THREE.TorusKnotGeometry(.2,.2, 22, 16); //Great Torus Knot effects, 4th =meshes

//   
 // const      planeGeometry = new THREE.BoxGeometry(100, 120, 150);  //cube
  // planeGeometry = new THREE.PlaneGeometry(200, 210, 230, 230); //plane big mal
 //  planeGeometry = new THREE.PlaneGeometry(10, 11, 13, 13); //plane 10 ok  //sin() deforms
   //
    //   //     const         planeGeometry = new THREE.BoxGeometry(2, 3, 3);  //cube /img ok aqui
  // planeGeometry = new THREE.SphereGeometry( 2, 1, 1 ); // radius, segmentsWidth, segmentsHeight // so small is actually a tetrahed
  //      planeGeometry = new THREE.SphereGeometry( 1.3, .062, .062 ); // radius, segmentsWidth, segmentsHeight SPHERE img OK
  //     planeGeometry = new THREE.PlaneBufferGeometry(2, 3); //Good img - no .rot prop
     planeGeometry = new THREE.PlaneGeometry(3, 3, 3, 3); //plane 10 Good  //sin() rotates different
   // 

  // MATERIAL
  const material = new THREE.ShaderMaterial({
	  
    uniforms: uniforms,
      fragmentShader: fragmentShader(),
      vertexShader: vertexShader()
    
  });
  
material.metalness = 0.7;  //on THREE.MeshStandardMaterial(); instead of newnew THREE.MeshBasicMaterial();
material.roughness = 0.2;
material.color = new THREE.Color(0xff00ff);
//material.wireframe = true;

 //  const plane = new THREE.Mesh(planeGeometry, planeMaterial);
  //   scene.add(plane);

 //
 mesh = new THREE.Mesh(planeGeometry, material);
  
  
  //SCENE
     scene.add(mesh);
    //    scene.add(new THREE.AmbientLight("rgb(255,255,255)", 1));
     scene.background = textureb;  //same as background instead of black bg
     //      scene.fog = new THREE.Fog(0xeee, 0, 750);
     scene.name = "ZryDys MovPic Fract";
     
  renderer.setSize( window.innerWidth *.4, window.innerHeight *.4 );

     
  //renderer.render(scene, camera);  //WORKS
  requestAnimationFrame(therender);  //WORKS TOO
    

} //end start()

//=============================================================
function therender() {
  renderer.render(scene, camera);
  requestAnimationFrame(therender);
  }

//=============================================================
 function animate() {
    requestAnimationFrame(animate );
 //   mesh.rotation.x += 0.01;
  // 
  //   mesh.rotation.y += 0.02;
    mesh.rotation.z += 0.007;  //clockwise
      //         if (uniforms.u_time.value < 1.1 ) {    capt_scr()  } ; //only captures first 100ms
   uniforms.u_time.value += clock.getDelta(); //from otr
       // black if (uniforms.u_time.value - 20*Math.round(uniforms.u_time.value / 20) < 1 ) {    capt_scr()  } ; 
   renderer.render(scene, camera);
 } // cj: end of moving logo img 3D ==========================================


 function onWindowResize( event ) {
            renderer.setSize( window.innerWidth *.6, window.innerHeight *.6 );
            uniforms.u_resolution.value.x = renderer.domElement.width;
            uniforms.u_resolution.value.y = renderer.domElement.height;
          // not, only capt 1st times 100ms      capt_scr()  ;   
         //uniforms.uTexture.value = texture ; //img 
                 uniforms.texture1.value = texture1 ; //img

         console.debug (uniforms , material, uniforms);

	// testing data image  on resize! 5 lines  ==> 	 cjImg2Dat( 'ibg', 'cjcan' ) ; // <==== all deps on CORS!
    /*  var im=document.getElementById("iq"); //img no toDataURL() 
    const objectURLs = []; 
    var s=document.getElementById("cjcan"); //canvas has toDataURL() but does see img inside  
    s.width=im.naturalWidth; //222 prints only those pixels not 100% pic
    s.height=im.naturalHeight;
    var ctx=s.getContext("2d");
    ctx.drawImage(im,0,0);
     // ok empty img: document.createElement("canvas").toDataURL("image/png"); ;
     console.debug ("yyy:",s  ); //ee no () var imDat = URL.createObjectURL(ee); //no on img? Uncaught TypeError: Failed to execute 'createObjectURL' on 'URL': Overload resolution failed.
    var imDat= s.toDataURL("image/png");  // only canvas?toDataURL();
	var img2 = new Image(  );  //{ width: 99 }
	img2.src = imDat;
	console.debug ( "dat2: ",   img2  );
    document.body.appendChild(img2); */
  }

// ================================================================
 function cjImg2Dat( idIm, idCv ) { // needs id of Img & Canvas
    var im=document.getElementById( idIm ); //img no toDataURL() 
    const objectURLs = []; 
    var s=document.getElementById( idCv ); //canvas has toDataURL() but does see img inside  
    s.width=im.naturalWidth; //222 prints only those pixels not 100% pic
    s.height=im.naturalHeight;
    im.crossorigin='anonymous'; 
    var ctx=s.getContext("2d");
    ctx.drawImage(im,0,0);  // ok empty img: document.createElement("canvas").toDataURL("image/png"); ;
     console.debug ("yyy:",s  ); //ee no () var imDat = URL.createObjectURL(ee); //no on img? Uncaught TypeError: Failed to execute 'createObjectURL' on 'URL': Overload resolution failed.
     //TODO  de canva a noseque canvasData = ctx.getImageData(0, 0, 100, 100);
    var imDat= s.toDataURL("image/png");  // only canvas?toDataURL(); ==> fail CORS
	var img2 = new Image(  );  //{ width: 99 }
	img2.src = imDat;
	console.debug ( "dat2: ",   img2 ,ctx.getImageData(0, 0, 100, 100) );
    document.body.appendChild(img2);  /* */
  }
  
 </script>
 <script>
 //capt_scr()  ; //tooEarly </script>

  </body>
  
</html>

